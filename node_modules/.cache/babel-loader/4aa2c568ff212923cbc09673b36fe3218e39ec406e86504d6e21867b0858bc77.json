{"ast":null,"code":"import _toConsumableArray from\"/Users/gavinsong/Documents/Cadence/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/gavinsong/Documents/Cadence/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import\"./infinitescroller.css\";import{jsx as _jsx}from\"react/jsx-runtime\";var useState=React.useState,useEffect=React.useEffect,useRef=React.useRef,useCallback=React.useCallback;var InfiniteScroller=function InfiniteScroller(_ref){var speed=_ref.speed,direction=_ref.direction,children=_ref.children;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),looperInstances=_useState2[0],setLooperInstances=_useState2[1];var outerRef=useRef(null);var innerRef=useRef(null);function resetAnimation(){if(innerRef!==null&&innerRef!==void 0&&innerRef.current){innerRef.current.setAttribute(\"data-animate\",\"false\");setTimeout(function(){if(innerRef!==null&&innerRef!==void 0&&innerRef.current){innerRef.current.setAttribute(\"data-animate\",\"true\");}},10);}}var setupInstances=useCallback(function(){if(!(innerRef!==null&&innerRef!==void 0&&innerRef.current)||!(outerRef!==null&&outerRef!==void 0&&outerRef.current))return;var _innerRef$current$get=innerRef.current.getBoundingClientRect(),width=_innerRef$current$get.width;var _outerRef$current$get=outerRef.current.getBoundingClientRect(),parentWidth=_outerRef$current$get.width;var widthDeficit=parentWidth-width;var instanceWidth=width/innerRef.current.children.length;if(widthDeficit){setLooperInstances(looperInstances+Math.ceil(widthDeficit/instanceWidth)+1);}resetAnimation();},[looperInstances]);/*\n    6 instances, 200 each = 1200\n    parent = 1700\n  */useEffect(function(){return setupInstances();},[setupInstances]);useEffect(function(){window.addEventListener(\"resize\",setupInstances);return function(){window.removeEventListener(\"resize\",setupInstances);};},[looperInstances,setupInstances]);return/*#__PURE__*/_jsx(\"div\",{className:\"looper\",ref:outerRef,children:/*#__PURE__*/_jsx(\"div\",{className:\"looper__innerList\",ref:innerRef,\"data-animate\":\"true\",children:_toConsumableArray(Array(looperInstances)).map(function(_,ind){return/*#__PURE__*/_jsx(\"div\",{className:\"looper__listInstance\",style:{animationDuration:\"\".concat(speed,\"s\"),animationDirection:direction===\"right\"?\"reverse\":\"normal\"},children:children},ind);})})});};export default InfiniteScroller;","map":{"version":3,"names":["React","jsx","_jsx","useState","useEffect","useRef","useCallback","InfiniteScroller","_ref","speed","direction","children","_useState","_useState2","_slicedToArray","looperInstances","setLooperInstances","outerRef","innerRef","resetAnimation","current","setAttribute","setTimeout","setupInstances","_innerRef$current$get","getBoundingClientRect","width","_outerRef$current$get","parentWidth","widthDeficit","instanceWidth","length","Math","ceil","window","addEventListener","removeEventListener","className","ref","_toConsumableArray","Array","map","_","ind","style","animationDuration","concat","animationDirection"],"sources":["/Users/gavinsong/Documents/Cadence/src/components/InfiniteScroller.tsx"],"sourcesContent":["import React from \"react\";\nimport \"./infinitescroller.css\";\nconst { useState, useEffect, useRef, useCallback } = React;\n\nconst InfiniteScroller = function InfiniteScroller({\n  speed,\n  direction,\n  children,\n}: {\n  speed: number;\n  direction: \"right\" | \"left\";\n  children: React.ReactNode;\n}) {\n  const [looperInstances, setLooperInstances] = useState(1);\n  const outerRef = useRef<HTMLDivElement>(null);\n  const innerRef = useRef<HTMLDivElement>(null);\n\n  function resetAnimation() {\n    if (innerRef?.current) {\n      innerRef.current.setAttribute(\"data-animate\", \"false\");\n\n      setTimeout(() => {\n        if (innerRef?.current) {\n          innerRef.current.setAttribute(\"data-animate\", \"true\");\n        }\n      }, 10);\n    }\n  }\n\n  const setupInstances = useCallback(() => {\n    if (!innerRef?.current || !outerRef?.current) return;\n\n    const { width } = innerRef.current.getBoundingClientRect();\n\n    const { width: parentWidth } = outerRef.current.getBoundingClientRect();\n\n    const widthDeficit = parentWidth - width;\n\n    const instanceWidth = width / innerRef.current.children.length;\n\n    if (widthDeficit) {\n      setLooperInstances(\n        looperInstances + Math.ceil(widthDeficit / instanceWidth) + 1\n      );\n    }\n\n    resetAnimation();\n  }, [looperInstances]);\n\n  /*\n    6 instances, 200 each = 1200\n    parent = 1700\n  */\n\n  useEffect(() => setupInstances(), [setupInstances]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", setupInstances);\n\n    return () => {\n      window.removeEventListener(\"resize\", setupInstances);\n    };\n  }, [looperInstances, setupInstances]);\n\n  return (\n    <div className=\"looper\" ref={outerRef}>\n      <div className=\"looper__innerList\" ref={innerRef} data-animate=\"true\">\n        {[...Array(looperInstances)].map((_, ind) => (\n          <div\n            key={ind}\n            className=\"looper__listInstance\"\n            style={{\n              animationDuration: `${speed}s`,\n              animationDirection: direction === \"right\" ? \"reverse\" : \"normal\",\n            }}\n          >\n            {children}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default InfiniteScroller;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}